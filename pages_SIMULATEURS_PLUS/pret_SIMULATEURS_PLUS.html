<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simulateur pr√™t immobilier 2026 ‚Äì Mensualit√©s &amp; capacit√©</title>
    <meta name="description" content="Simulez votre pr√™t immobilier en 2026. Mensualit√©s, taux, capacit√© d‚Äôemprunt et financement total gratuitement." />
    <meta
      name="keywords"
      content="simulation pr√™t immobilier 2026, simulateur pr√™t immobilier, comment simuler un pr√™t immobilier, capacit√© d‚Äôemprunt, mensualit√© pr√™t immobilier, co√ªt total cr√©dit, taux d‚Äôendettement 35%, indicateur d‚Äôeffort, assurance emprunteur, TAEG estim√©, frais de dossier, frais de garantie, pr√™t immobilier vs pr√™t conso, simulateur cr√©dit conso"
    />
    <meta name="google-adsense-account" content="ca-pub-2209781252231399">

    <!-- SEO & Social -->
    <link rel="canonical" href="https://www.lescalculateurs.fr/pages/pret" />
    <meta property="og:url" content="https://www.lescalculateurs.fr/pages/pret" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Simulateur pr√™t immobilier 2026 ‚Äì Mensualit√©s &amp; capacit√©" />
    <meta property="og:description" content="Simulez votre pr√™t immobilier en 2026. Mensualit√©s, taux, capacit√© d‚Äôemprunt et financement total gratuitement." />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Simulateur pr√™t immobilier 2026 ‚Äì Mensualit√©s &amp; capacit√©" />
    <meta name="twitter:description" content="Simulez votre pr√™t immobilier en 2026. Mensualit√©s, taux, capacit√© d‚Äôemprunt et financement total gratuitement." />

    <!-- JSON-LD: BreadcrumbList & FAQPage -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Accueil",
          "item": "https://www.lescalculateurs.fr/index"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Pr√™t immobilier",
          "item": "https://www.lescalculateurs.fr/pages/pret"
        }
      ]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Comment calculer ma capacit√© d'emprunt maximale ?",
          "acceptedAnswer": {"@type": "Answer", "text": "Votre capacit√© d√©pend de vos revenus, de vos charges et du taux d'endettement (souvent ~35% assurance incluse). Le simulateur calcule automatiquement les mensualit√©s et le taux d'endettement estim√©."}
        },
        {
          "@type": "Question",
          "name": "Quels sont les taux de pr√™t immobilier en 2026 ?",
          "acceptedAnswer": {"@type": "Answer", "text": "Les taux varient selon la dur√©e et le profil. Sur 20 ans, comptez environ 3,5‚Äì4,5% pour un tr√®s bon dossier. Le simulateur utilise des taux moyens actualis√©s."}
        },
        {
          "@type": "Question",
          "name": "L'assurance emprunteur est-elle obligatoire ?",
          "acceptedAnswer": {"@type": "Answer", "text": "Non l√©galement, mais exig√©e par les banques. En moyenne 0,3‚Äì0,6% du capital selon l'√¢ge/sant√©. La loi Lemoine permet de choisir son assureur."}
        },
        {
          "@type": "Question",
          "name": "Quels frais annexes pr√©voir ?",
          "acceptedAnswer": {"@type": "Answer", "text": "Frais de dossier (0,5‚Äì1%), garantie (hypoth√®que/caution 1‚Äì2%), courtage √©ventuel. Le simulateur int√®gre ces co√ªts pour un calcul r√©aliste."}
        }
      ]
    }
    </script>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/favicon-16x16.png">
    <link rel="manifest" href="../assets/site.webmanifest">
    <link rel="shortcut icon" href="../assets/favicon.ico">

    <script defer src="/third-party-loader.js"></script>
    
    <!-- JSON-LD Calculator Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Calculator",
      "name": "Calculateur Pr√™t Immobilier 2026",
      "description": "Calculez vos mensualit√©s de pr√™t immobilier et votre capacit√© d'emprunt en 2026 - taux actualis√©s, assurance incluse",
      "url": "https://www.lescalculateurs.fr/pages/pret",
      "applicationCategory": "FinanceApplication",
      "screenshot": "https://www.lescalculateurs.fr/pages/pret",
      "isBasedOn": [
        "https://www.lescalculateurs.fr/pages/methodologie",
        "https://www.lescalculateurs.fr/pages/sources"
      ],
      "citation": [
        {
          "@type": "Organization",
          "name": "Banque de France",
          "url": "https://www.banque-france.fr"
        },
        {
          "@type": "CreativeWork",
          "name": "Service-public.fr ‚Äì Cr√©dit immobilier",
          "url": "https://www.service-public.fr/particuliers/vosdroits/N20373"
        },
        {
          "@type": "CreativeWork",
          "name": "DVF ‚Äì data.gouv.fr",
          "url": "https://www.data.gouv.fr"
        }
      ]
    }
    </script>

    <!-- Sources Meta Tag for AI -->
    <meta name="source" content="banque-france.fr, service-public.fr, data.gouv.fr">
    <!-- Schema.org SoftwareApplication -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Simulateur de pr√™t immobilier",
        "operatingSystem": "Web",
        "applicationCategory": "FinanceApplication",
        "description": "Simulateur de cr√©dit immobilier pour estimer mensualit√©s, capacit√© d'emprunt et co√ªt total du financement.",
        "url": "https://www.lescalculateurs.fr/pages/pret-immobilier",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "EUR"
        }
      }
    </script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "Comment simuler mon pr√™t immobilier 2026 ?",
  "step": [
    {
      "@type": "HowToStep",
      "position": 1,
      "text": "Renseignez vos crit√®res personnels"
    },
    {
      "@type": "HowToStep",
      "position": 2,
      "text": "Cliquez sur Estimer"
    },
    {
      "@type": "HowToStep",
      "position": 3,
      "text": "Consultez le r√©sultat d√©taill√©"
    }
  ]
}
</script>
</head>
  <body class="bg-gray-50">
<div class="sticky-ymyl" role="alert" style="position:sticky;top:0;z-index:9999;background:#fff3cd;border:1px solid #ffc107;padding:12px 16px;text-align:center;font-size:14px;"><strong>‚ö†Ô∏è Estimation indicative.</strong> Montant definitif sur <a href="https://www.notaires.fr" target="_blank" rel="noopener" style="color:#856404;text-decoration:underline;font-weight:bold;">notaires.fr</a> ou <a href="/simulateur" style="color:#856404;text-decoration:underline;">simulateur officiel</a>.</div>

    <header class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col gap-3 py-4 sm:flex-row sm:justify-between sm:items-center">
          <!-- Logo & Navigation -->
          <div class="flex items-center gap-4 flex-wrap">
            <img src="/assets/lescalculateurs-new-logo.png" alt="LesCalculateurs.fr" class="h-10 w-auto">
            <a href="../index.html" class="flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium transition-colors">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
              </svg>
              <span>üè† Accueil</span>
            </a>
            <div class="hidden sm:block">
              <span class="text-gray-400">|</span>
            </div>
            <div class="hidden sm:flex items-center space-x-2">
              <div class="bg-green-100 text-green-700 rounded-lg p-1.5">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M4 7a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7zm3 3a1 1 0 000 2h6a1 1 0 100-2H7z"></path>
                </svg>
              </div>
              <span class="text-sm font-medium text-gray-700">Pr√™t Immobilier</span>
            </div>
          </div>

          <!-- Title & Status -->
          <div class="sm:flex-1 sm:flex sm:justify-center">
            <!-- Bloc d√©plac√© sous l'avertissement -->
          </div>

          <!-- Actions -->
          <div class="flex items-center space-x-2">
            <div class="hidden md:block">
              <span class="text-xs text-gray-500">Taux actuels</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
        <p class="text-sm text-gray-800 m-0">
          Les calculs reposent sur des formules standard d'amortissement et des
          hypoth√®ses simplifi√©es (assurance, frais). Ils constituent une
          estimation indicative et non contractuelle.
        </p>
      </div>

      <div class="flex flex-col items-center mt-6 mb-8">
        <div class="flex items-center gap-3">
          <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">
            Simulateur pr√™t immobilier : mensualit√©s et capacit√© d‚Äôemprunt
          </h1>
        </div>
        <p class="text-sm text-gray-600 mt-2 text-center">
          Calculez vos mensualit√©s et votre capacit√© d‚Äôemprunt selon le montant, la dur√©e et le taux de cr√©dit immobilier (estimation indicative).
        </p>
        <button
          data-scroll-target="#calculator-container"
          data-scroll-focus="input, select, textarea"
          class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors shadow-md mt-6"
        >
          üü¢ Lancer la simulation
        </button>
      </div>
      </div>

      <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-8">
        <p class="text-blue-800 text-sm mb-2">
          <strong>üìå Simulation √† titre indicatif :</strong> Ce simulateur
          affiche un indicateur d'effort bas√© sur le reste √† vivre (revenus ‚àí
          charges) et un taux d'endettement indicatif au sens bancaire
          (mensualit√©s de cr√©dit + charges) / revenus.
        </p>
        <p class="text-blue-800 text-sm m-0">
          Les frais (dossier, garantie) sont g√©n√©ralement pay√©s √† part ; ils
          sont pris en compte dans le co√ªt total et le TAEG estim√©.
        </p>
      </div>

      <section class="mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-lg p-6">
        <div class="flex flex-col gap-4 sm:flex-row sm:items-start sm:gap-6">
          <div class="text-4xl leading-none">üìä</div>
          <div class="flex-1">
            <h2 class="text-xl font-bold text-gray-900 mb-2">
              Comparez plusieurs montages de pr√™t (facultatif)
            </h2>
            <p class="text-gray-700 mb-4">
              Faites un premier calcul, puis testez une variante (dur√©e, taux, apport, assurance)
              pour voir imm√©diatement l‚Äôimpact sur la mensualit√©, le co√ªt total et l‚Äôeffort.
            </p>
            <div class="grid sm:grid-cols-3 gap-4">
              <div class="bg-white rounded-lg p-4 shadow-sm">
                <h3 class="font-bold text-gray-900 mb-1">üîÑ Comparaison</h3>
                <p class="text-sm text-gray-600">
                  Ajoutez des sc√©narios et comparez les √©carts.
                </p>
              </div>
              <div class="bg-white rounded-lg p-4 shadow-sm">
                <h3 class="font-bold text-gray-900 mb-1">üí° Indicateurs cl√©s</h3>
                <p class="text-sm text-gray-600">
                  Mensualit√©, co√ªt total, TAEG et effort bancaire estim√©.
                </p>
              </div>
              <div class="bg-white rounded-lg p-4 shadow-sm">
                <h3 class="font-bold text-gray-900 mb-1">üì• Export</h3>
                <p class="text-sm text-gray-600">
                  T√©l√©chargez vos r√©sultats (PDF / CSV selon options).
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div id="calculator-container"></div>

      <div class="mt-6 flex justify-center gap-3">
        <button
          id="pret-add-to-compare"
          class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md transition-colors"
        >
          ‚ûï Ajouter √† la comparaison
        </button>
        <button
          id="pret-reset-compare"
          class="px-6 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 font-semibold shadow-md transition-colors hidden"
        >
          üîÑ R√©initialiser
        </button>
      </div>

      <div id="pret-comparaison" class="hidden mt-8"></div>

      <!-- Intro SEO -->
      <section class="mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">
          üè¶ Simulateur Pr√™t Immobilier 2026
        </h2>

        <!-- AI Section: Question explicite -->
        <section class="ai-intro mb-6">
          <h2 class="text-xl font-bold text-gray-900 mb-2">‚ùì Quel est le co√ªt r√©el de votre pr√™t immobilier en 2026 ?</h2>
          <p class="ai-response text-gray-700">
            Mensualit√© = (capital √ó i √ó (1+i)^n) / ((1+i)^n ‚àí 1) + assurance (approx.).
            Les frais (dossier, garantie) sont g√©n√©ralement pay√©s √† part et influencent le co√ªt total et le TAEG.
          </p>
        </section>

        <!-- AI Section: R√©sum√© rapide -->
        <section class="ai-summary mb-6">
          <h3 class="text-lg font-bold text-gray-900 mb-3">üìå R√©sum√© rapide</h3>
          <ul class="space-y-2 text-gray-700">
            <li><strong>Source:</strong> Banque de France (publications et seuils observ√©s) & conditions bancaires 2026</li>
            <li><strong>Calcul:</strong> Capital + int√©r√™ts (annuit√© constante, taux fixe) + assurance + frais (dossier, garantie)</li>
            <li><strong>Particularit√©:</strong> Taux d'endettement indicatif ~35% (assurance incluse) | Taux d'usure variable | PTZ possible primo-acc√©dants</li>
            <li><strong>Outil:</strong> Simulation gratuite, taux actualis√©s janvier 2026</li>
          </ul>
        </section>

        <p class="text-lg text-gray-600 leading-relaxed mb-4">
          Simulez votre pr√™t immobilier 2026 avec pr√©cision ! Notre calculateur
          int√®gre les taux actuels, l'assurance emprunteur et tous les frais
          annexes pour vous donner une vision compl√®te de votre financement.
          D√©couvrez votre capacit√© d'emprunt maximale et optimisez vos
          mensualit√©s selon votre profil.
        </p>
        <p class="text-lg text-gray-600 leading-relaxed">
          Particulier ou investisseur, r√©sidence principale ou secondaire, notre
          outil s'adapte √† votre projet. Simulations instantan√©es bas√©es sur les
          conditions bancaires 2026, avec prise en compte du taux d'usure, des
          frais de dossier et de garantie. Pr√©parez sereinement votre
          rendez-vous bancaire avec des chiffres fiables et argument√©s. Pour
          plus de d√©tails (publications et seuils observ√©s), consultez la
          <a href="https://www.banque-france.fr/fr/a-votre-service/particuliers/connaitre-pratiques-bancaires-assurance/credit/taux-usure" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Banque de France</a>.
        </p>
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4">
          <p class="text-sm text-blue-800">
            <strong>Taux d'usure :</strong> le plafond l√©gal √©volue tous les mois. Ajustez vos simulations en cons√©quence et v√©rifiez le taux d'usure en vigueur aupr√®s de la Banque de France.
          </p>
        </div>
      </section>

      <!-- Feature Cards -->
      <section class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-8 mb-12">
        <div class="space-y-4">
          <div class="grid md:grid-cols-3 gap-4">
            <div class="bg-white rounded-lg p-4 shadow-sm">
              <div class="text-3xl mb-2">üìä</div>
              <h3 class="font-bold text-gray-900 mb-1">
                Capacit√© d'emprunt estim√©e
              </h3>
              <p class="text-sm text-gray-600">
                Calculez votre capacit√© d'emprunt maximale selon vos revenus et
                charges (taux d'endettement indicatif ~35%)
              </p>
            </div>
            <div class="bg-white rounded-lg p-4 shadow-sm">
              <div class="text-3xl mb-2">üí≥</div>
              <h3 class="font-bold text-gray-900 mb-1">Mensualit√©s pr√©cises</h3>
              <p class="text-sm text-gray-600">
                Int√©gration du taux nominal, assurance emprunteur, frais de
                dossier et de garantie
              </p>
            </div>
            <div class="bg-white rounded-lg p-4 shadow-sm">
              <div class="text-3xl mb-2">üîÑ</div>
              <h3 class="font-bold text-gray-900 mb-1">
                Comparaison multi-dur√©es
              </h3>
              <p class="text-sm text-gray-600">
                Comparez plusieurs sc√©narios de dur√©e et taux pour optimiser
                votre financement
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="bg-white rounded-lg shadow-lg p-8 mb-12">
        <p class="text-gray-600 mb-6">
          Cette page est une simulation indicative : elle aide √† comprendre les
          ordres de grandeur (mensualit√©, co√ªt total, endettement) avant de
          comparer des sc√©narios et de demander une offre de pr√™t.
        </p>

        <h2 class="text-2xl font-bold text-gray-900 mb-3">
          Comment fonctionne une simulation de pr√™t immobilier ?
        </h2>
        <p class="text-gray-600 mb-4">
          Une simulation de pr√™t immobilier consiste √† estimer une mensualit√© et
          un co√ªt total √† partir de quelques param√®tres : montant emprunt√©,
          dur√©e, taux nominal et assurance. Le simulateur ci‚Äëdessus fournit une
          estimation indicative (taux fixe), utile pour pr√©parer un projet et
          comparer des sc√©narios.
        </p>

        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-3">
          Capacit√© d‚Äôemprunt : comment l‚Äôestimer ?
        </h2>
        <p class="text-gray-600 mb-4">
          La capacit√© d‚Äôemprunt d√©pend de vos revenus, de vos charges r√©currentes
          et d‚Äôun seuil d‚Äôendettement indicatif (souvent autour de 35% assurance
          incluse). Le simulateur affiche √† la fois un taux d‚Äôendettement
          (bancaire indicatif) et un indicateur d‚Äôeffort (reste √† vivre) pour
          mieux comprendre votre marge.
        </p>

        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-3">
          Simulation pr√™t immobilier : mensualit√© et co√ªt total
        </h2>
        <p class="text-gray-600 mb-4">
          La mensualit√© totale regroupe g√©n√©ralement capital + int√©r√™ts +
          assurance (selon l‚Äôhypoth√®se retenue). Le co√ªt total sur la dur√©e
          d√©pend surtout de la dur√©e et du taux : une dur√©e plus longue r√©duit
          la mensualit√© mais augmente souvent le co√ªt total.
        </p>

        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-3">
          Pr√™t immobilier vs pr√™t conso / auto : quelles diff√©rences ?
        </h2>
        <p class="text-gray-600 mb-4">
          Un pr√™t immobilier finance un bien immobilier sur des dur√©es longues,
          avec des frais sp√©cifiques (garantie, dossier, notaire). Un pr√™t conso
          ou auto finance un achat avec des dur√©es plus courtes et des r√®gles
          diff√©rentes. Pour une estimation d√©di√©e au cr√©dit conso, utilisez
          notre <a href="/pages/financement.html" class="text-blue-600 hover:underline">simulateur de financement</a>.
        </p>

        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-3">
          Frais √† pr√©voir en plus du pr√™t
        </h2>
        <p class="text-gray-600 mb-3">
          En plus des mensualit√©s, un projet immobilier implique souvent des
          frais et charges √† anticiper :
        </p>
        <ul class="text-gray-600 space-y-2 ml-4 list-disc list-inside mb-4">
          <li>
            <a href="/pages/notaire.html" class="text-blue-600 hover:underline">Frais de notaire</a> (achat)
          </li>
          <li>Assurance emprunteur (co√ªt variable selon l‚Äôoffre)</li>
          <li>
            <a href="/pages/taxe.html" class="text-blue-600 hover:underline">Taxe fonci√®re</a> (annuelle)
          </li>
          <li>
            <a href="/pages/charges.html" class="text-blue-600 hover:underline">Charges de copropri√©t√©</a> (si copro)
          </li>
        </ul>

        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-3">
          Exemples concrets (indicatifs)
        </h2>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
            <p class="font-semibold text-gray-900 mb-2">Exemple 1</p>
            <p class="text-sm text-gray-700 m-0">
              250 000‚Ç¨ sur 20 ans √† 4% (taux indicatif) + assurance 0,36% :
              mensualit√© totale autour de 1 550‚Ç¨‚Äì1 650‚Ç¨ / mois selon hypoth√®ses.
            </p>
          </div>
          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
            <p class="font-semibold text-gray-900 mb-2">Exemple 2</p>
            <p class="text-sm text-gray-700 m-0">
              300 000‚Ç¨ sur 25 ans √† 4,2% + assurance 0,36% :
              mensualit√© totale autour de 1 700‚Ç¨‚Äì1 900‚Ç¨ / mois selon hypoth√®ses.
            </p>
          </div>
        </div>
        <p class="text-xs text-gray-500 mt-3">
          Ces exemples sont indicatifs et non contractuels. Le r√©sultat r√©el
          d√©pend des conditions exactes de l‚Äôoffre et des frais appliqu√©s.
        </p>
      </section>

      <!-- FAQ Schema.org -->
      <section class="mt-12">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">
          ‚ùì Questions fr√©quentes
        </h2>

        <div class="space-y-4">
          <div
            class="bg-white rounded-lg p-6 shadow-sm"
          >
                  <div class="flex flex-col items-center mb-8">
                    <button
                      data-scroll-target="#calculator-container"
                      data-scroll-focus="input, select, textarea"
                      class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-xl text-lg transition-colors shadow-lg mt-2"
                    >
                      üü¢ Lancer la simulation
                    </button>
                  </div>
                bancaires 2026.
              </p>
            </div>
          </div>

          <div
            class="bg-white rounded-lg p-6 shadow-sm"
          >
            <h3
              class="text-lg font-semibold text-gray-800 mb-3"
            >
              Quels sont les taux de pr√™t immobilier en 2026 ?
            </h3>
            <div>
              <p class="text-gray-600">
                Les taux varient selon la dur√©e (15-25 ans) et votre profil.
                Notre calculateur utilise les taux moyens 2026 observ√©s :
                environ 3,5-4,5% pour un excellent profil sur 20 ans.
              </p>
            </div>
          </div>

          <div class="bg-white rounded-lg p-6 shadow-sm">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">
              Comment simuler un pr√™t immobilier ?
            </h3>
            <div>
              <p class="text-gray-600">
                Renseignez le prix du bien, l‚Äôapport, la dur√©e, le taux nominal
                et l‚Äôassurance. Le simulateur calcule la mensualit√©, le co√ªt
                total et des indicateurs (endettement/effort) pour comparer vos
                sc√©narios.
              </p>
            </div>
          </div>

          <div class="bg-white rounded-lg p-6 shadow-sm">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">
              Comment calculer un pr√™t immobilier ?
            </h3>
            <div>
              <p class="text-gray-600">
                Le calcul d‚Äôun pr√™t immobilier repose sur le montant emprunt√©,
                la dur√©e, le taux d‚Äôint√©r√™t et l‚Äôassurance. La mensualit√© est
                calcul√©e selon une formule d‚Äôannuit√© constante. Le plus simple
                reste d‚Äôutiliser un simulateur pour obtenir une estimation
                adapt√©e √† votre situation.
              </p>
            </div>
          </div>

          <div class="bg-white rounded-lg p-6 shadow-sm">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">
              Peut-on simuler sans passer par une banque ?
            </h3>
            <div>
              <p class="text-gray-600">
                Oui : une simulation sert √† obtenir un ordre de grandeur et √†
                pr√©parer votre projet. Elle ne remplace pas une offre de pr√™t :
                la d√©cision finale et les conditions exactes d√©pendent de
                l‚Äô√©tablissement pr√™teur.
              </p>
            </div>
          </div>

          <div class="bg-white rounded-lg p-6 shadow-sm">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">
              Le simulateur donne-t-il un accord de pr√™t ?
            </h3>
            <div>
              <p class="text-gray-600">
                Non. Le simulateur fournit une estimation indicative. Un accord
                d√©pend d‚Äôune analyse compl√®te (revenus, charges, stabilit√©,
                apport, taux d‚Äôusure, etc.) et de l‚Äôoffre de pr√™t.
              </p>
            </div>
          </div>

          <div class="bg-white rounded-lg p-6 shadow-sm">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">
              Quel salaire pour emprunter X ‚Ç¨ ?
            </h3>
            <div>
              <p class="text-gray-600">
                Il n‚Äôexiste pas un salaire unique : cela d√©pend de la dur√©e, du
                taux, de l‚Äôassurance et de vos charges r√©currentes. Une r√®gle
                indicative consiste √† v√©rifier que (mensualit√© + charges)
                repr√©sente une part raisonnable de vos revenus (souvent ~35%
                assurance incluse). Le simulateur vous donne directement
                l‚Äôendettement et l‚Äôeffort pour tester plusieurs sc√©narios.
              </p>
            </div>
          </div>

          <div class="bg-white rounded-lg p-6 shadow-sm">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">
              Quelle dur√©e choisir ?
            </h3>
            <div>
              <p class="text-gray-600">
                Une dur√©e plus courte r√©duit g√©n√©ralement le co√ªt total mais
                augmente la mensualit√©. Une dur√©e plus longue baisse la
                mensualit√© mais augmente souvent le co√ªt total. Comparez 15, 20
                et 25 ans pour trouver le bon √©quilibre avec votre budget.
              </p>
            </div>
          </div>

          <div
            class="bg-white rounded-lg p-6 shadow-sm"
          >
            <h3
              class="text-lg font-semibold text-gray-800 mb-3"
            >
              L'assurance emprunteur est-elle obligatoire ?
            </h3>
            <div>
              <p class="text-gray-600">
                L√©galement non, mais exig√©e par toutes les banques. Comptez
                0,3-0,6% du capital selon votre √¢ge et sant√©. Vous pouvez
                choisir votre assureur depuis la loi Lemoine.
              </p>
            </div>
          </div>

          <div
            class="bg-white rounded-lg p-6 shadow-sm"
          >
            <h3
              class="text-lg font-semibold text-gray-800 mb-3"
            >
              Quels frais annexes pr√©voir ?
            </h3>
            <div>
              <p class="text-gray-600">
                Frais de dossier (0,5-1%), garantie hypoth√©caire ou caution
                (1-2%), frais de courtage √©ventuels. Notre simulateur int√®gre
                tous ces co√ªts pour un calcul r√©aliste.
              </p>
            </div>
          </div>

          <div
            class="bg-white rounded-lg p-6 shadow-sm"
          >
            <h3
              class="text-lg font-semibold text-gray-800 mb-3"
            >
              Puis-je emprunter seul ou √† deux ?
            </h3>
            <div>
              <p class="text-gray-600">
                L'emprunt √† deux augmente la capacit√© (cumul des revenus) mais
                engage solidairement. Notre calculateur permet de simuler les
                deux situations pour optimiser votre dossier.
              </p>
            </div>
          </div>
        </div>
      </section>

      </section>    </main>

    <section class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mt-8">
      <div class="bg-white border-2 border-gray-200 rounded-lg p-6">
        <h3 class="text-xl font-bold text-gray-900 mb-3">üîó Voir aussi</h3>
        <p class="text-sm text-gray-600 mb-3">
          Parcours immobilier :
          <a href="/pages/apl.html" class="text-blue-700 hover:underline">APL</a>
          ‚Üí
          <a href="/pages/pret.html" class="text-blue-700 hover:underline">Pr√™t</a>
          ‚Üí
          <a href="/pages/notaire.html" class="text-blue-700 hover:underline">Notaire</a>
          ‚Üí
          <a href="/pages/taxe.html" class="text-blue-700 hover:underline">Taxe</a>
          ‚Üí
          <a href="/pages/charges.html" class="text-blue-700 hover:underline">Charges</a>
        </p>
        <div class="flex flex-wrap gap-3">
          <a href="/pages/apl.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">APL 2026</a>
          <a href="/pages/notaire.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Frais de notaire</a>
          <a href="/pages/plusvalue.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Plus‚Äëvalue immobili√®re</a>
          <a href="/pages/charges.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Charges de copropri√©t√©</a>
          <a href="/pages/taxe.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Taxe fonci√®re</a>
          <a href="/pages/impot.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Imp√¥t sur le revenu</a>
          <a href="/pages/ik.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Indemnit√©s kilom√©triques (IK)</a>
          <a href="/pages/travail.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Temps de travail</a>
          <a href="/pages/blog/frais-notaire-departements.html" class="inline-block bg-blue-600 text-white rounded px-4 py-2 text-sm font-semibold shadow hover:bg-blue-700">Tous les d√©partements</a>
          <a href="/pages/blog.html" class="inline-block bg-white border border-gray-300 rounded px-3 py-2 text-sm text-blue-700 hover:bg-blue-50">Blog</a>
        </div>
      </div>
    </section>

    <section class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mt-8">
      <div class="mt-12 bg-gray-100 rounded-lg p-6">
        <h3 class="font-bold text-gray-900 mb-3">üìö Sources et r√©f√©rences officielles</h3>
        <ul class="text-sm text-gray-700 space-y-2">
          <li>
            ‚Ä¢ Taux d'usure et informations officielles:
            <a href="https://www.banque-france.fr/fr/a-votre-service/particuliers/connaitre-pratiques-bancaires-assurance/credit/taux-usure" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Banque de France</a>
          </li>
          <li>
            ‚Ä¢ Pr√™t √† Taux Z√©ro (PTZ):
            <a href="https://www.service-public.fr/particuliers/vosdroits/F10871" target="_blank" rel="noopener" class="text-blue-600 hover:underline">service-public.fr</a>
          </li>
          <li>
            ‚Ä¢ Assurance emprunteur (r√®gles et d√©marches):
            <a href="https://www.service-public.fr/particuliers/actualites/A15916" target="_blank" rel="noopener" class="text-blue-600 hover:underline">service-public.fr</a>
          </li>
        </ul>
      </div>
    </section>

    <footer class="bg-gray-800 text-white py-8 mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col items-center space-y-4">
          <p class="text-gray-300">
            ¬© 2026 Les Calculateurs - Pr√™t immobilier selon bar√®mes officiels
          </p>
          <div class="flex gap-4 text-sm">
            <a href="/pages/methodologie" class="text-gray-300 hover:text-white transition-colors">üìö Notre M√©thodologie</a>
            <span class="text-gray-500">|</span>
            <a href="/pages/sources" class="text-gray-300 hover:text-white transition-colors">üèõÔ∏è Sources Officielles</a>
          </div>
        </div>
      </div>
    </footer>

    <script type="module" src="../main.ts"></script>
    <script type="module">
      import { CalculatorFrame } from "../components/CalculatorFrame.ts";
      import { formatCurrency } from "../main.ts";

      const pretConfig = {
        title: "Simulateur de pr√™t immobilier 2026",
        description:
          "Simulation compl√®te : capacit√© d'emprunt, mensualit√©s, assurance, frais de dossier.",
        fields: [
          {
            id: "prix_bien",
            label: "Prix du bien immobilier (‚Ç¨) *",
            type: "number",
            required: true,
            placeholder: "300000",
            min: 10000,
            step: 1000,
          },
          {
            id: "apport_personnel",
            label: "Apport personnel (‚Ç¨) *",
            type: "number",
            required: true,
            placeholder: "50000",
            min: 0,
            step: 1000,
          },
          {
            id: "duree",
            label: "Dur√©e du pr√™t *",
            type: "select",
            required: true,
            options: [
              { value: "10", label: "10 ans" },
              { value: "15", label: "15 ans" },
              { value: "20", label: "20 ans" },
              { value: "25", label: "25 ans" },
              { value: "30", label: "30 ans" },
            ],
          },
          {
            id: "taux_nominal",
            label: "Taux d'int√©r√™t nominal (%/an) *",
            type: "number",
            required: true,
            placeholder: "4.0",
            min: 0.1,
            max: 10,
            step: 0.1,
          },
          {
            id: "revenus_emprunteur1",
            label: "Revenus mensuels (‚Ç¨) emprunteur 1 *",
            type: "number",
            required: true,
            placeholder: "3500",
            min: 1000,
            step: 100,
          },
          {
            id: "revenus_emprunteur2",
            label: "Revenus mensuels (‚Ç¨) emprunteur 2 (optionnel)",
            type: "number",
            placeholder: "0",
            min: 0,
            step: 100,
          },
          {
            id: "charges_mensuelles",
            label: "Charges mensuelles (‚Ç¨) existantes (optionnel)",
            type: "number",
            placeholder: "0",
            min: 0,
            step: 50,
          },
          {
            id: "assurance_taux",
            label: "Taux d'assurance emprunteur (%/an)",
            type: "number",
            placeholder: "0.36",
            min: 0.1,
            max: 2,
            step: 0.01,
          },
          {
            id: "frais_dossier",
            label: "Frais de dossier (‚Ç¨) (optionnel)",
            type: "number",
            placeholder: "0",
            min: 0,
            step: 100,
          },
          {
            id: "frais_garantie",
            label: "Frais de garantie (‚Ç¨) (optionnel)",
            type: "number",
            placeholder: "0",
            min: 0,
            step: 100,
          },
        ],
        calculate: (values) => {
          try {
            const prixBien = Number(values.prix_bien) || 0;
            const apportPersonnel = Number(values.apport_personnel) || 0;
            const montantEmprunte = prixBien - apportPersonnel;

            if (montantEmprunte <= 0) {
              return {
                success: false,
                error:
                  "L'apport ne peut pas √™tre sup√©rieur ou √©gal au prix du bien",
              };
            }

            const dureeAnnees = parseInt(values.duree) || 20;
            const dureeMois = dureeAnnees * 12;
            const tauxNominal = (Number(values.taux_nominal) || 0) / 100;
            const tauxMensuel = tauxNominal / 12;

            const revenusMensuels =
              (Number(values.revenus_emprunteur1) || 0) +
              (Number(values.revenus_emprunteur2) || 0);
            const chargesMensuelles = Number(values.charges_mensuelles) || 0;
            const revenusDisponibles = Math.max(0, revenusMensuels - chargesMensuelles);

            if (revenusMensuels <= 0) {
              return {
                success: false,
                error: "Veuillez saisir des revenus mensuels valides.",
              };
            }
            if (revenusDisponibles <= 0) {
              return {
                success: false,
                error:
                  "Les charges mensuelles ne peuvent pas √™tre sup√©rieures ou √©gales aux revenus.",
              };
            }

            const tauxAssurance = (Number(values.assurance_taux) || 0) / 100;
            const fraisDossier = Number(values.frais_dossier) || 0;
            const fraisGarantie = Number(values.frais_garantie) || 0;

            // Calcul de la mensualit√© capital + int√©r√™ts
            let mensualiteCapitalInterets = 0;
            if (tauxMensuel > 0) {
              mensualiteCapitalInterets =
                (montantEmprunte *
                  tauxMensuel *
                  Math.pow(1 + tauxMensuel, dureeMois)) /
                (Math.pow(1 + tauxMensuel, dureeMois) - 1);
            } else {
              mensualiteCapitalInterets = montantEmprunte / dureeMois;
            }

            // Assurance (sur capital emprunt√©)
            const assuranceMensuelle = (montantEmprunte * tauxAssurance) / 12;

            // Mensualit√© totale
            const mensualiteTotale =
              mensualiteCapitalInterets + assuranceMensuelle;

            const coutTotalInterets =
              mensualiteCapitalInterets * dureeMois - montantEmprunte;
            const coutTotalAssurance = assuranceMensuelle * dureeMois;
            const coutTotalHorsFrais =
              (mensualiteCapitalInterets + assuranceMensuelle) * dureeMois -
              montantEmprunte;
            const coutTotalFrais = fraisDossier + fraisGarantie;
            const coutTotalAvecFrais = coutTotalHorsFrais + coutTotalFrais;

            const tauxEffort = (mensualiteTotale / revenusDisponibles) * 100;

            const tauxEndettement = ((mensualiteTotale + chargesMensuelles) / revenusMensuels) * 100;
            const tauxEndettementMax = 35;
            const mensualiteMax = Math.max(
              0,
              revenusMensuels * (tauxEndettementMax / 100) - chargesMensuelles
            );
            const capaciteRestante = Math.max(0, mensualiteMax - mensualiteTotale);

            const netPer√ßu = montantEmprunte - fraisDossier - fraisGarantie;
            const paymentMensuel = mensualiteCapitalInterets + assuranceMensuelle;
            const computePV = (r) => {
              if (r <= 0) return paymentMensuel * dureeMois;
              let pv = 0;
              let denom = 1 + r;
              let factor = denom;
              for (let k = 1; k <= dureeMois; k++) {
                pv += paymentMensuel / factor;
                factor *= denom;
              }
              return pv;
            };

            let taeg = null;
            if (netPer√ßu > 0 && paymentMensuel > 0) {
              let low = 0;
              let high = 1;
              while (computePV(high) > netPer√ßu && high < 10) {
                high *= 2;
              }
              if (computePV(high) <= netPer√ßu) {
                for (let i = 0; i < 60; i++) {
                  const mid = (low + high) / 2;
                  const pv = computePV(mid);
                  if (pv > netPer√ßu) low = mid;
                  else high = mid;
                }
                const rMensuel = (low + high) / 2;
                taeg = (Math.pow(1 + rMensuel, 12) - 1) * 100;
              }
            }

            return {
              success: true,
              data: {
                prixBien,
                apportPersonnel,
                montantEmprunte,
                dureeAnnees,
                tauxNominal: tauxNominal * 100,
                mensualiteCapitalInterets,
                assuranceMensuelle,
                mensualiteTotale,
                coutTotalInterets,
                coutTotalAssurance,
                coutTotalHorsFrais,
                coutTotalFrais,
                coutTotalAvecFrais,
                tauxEndettement,
                tauxEffort,
                capaciteRestante,
                revenusMensuels,
                chargesMensuelles,
                revenusDisponibles,
                mensualiteMax,
                tauxEndettementMax,
                fraisDossier,
                fraisGarantie,
                taeg,
              },
            };
          } catch (error) {
            return {
              success: false,
              error: "Erreur dans le calcul du pr√™t immobilier",
            };
          }
        },
        /**
         * Formate l‚Äôaffichage des r√©sultats (totaux, d√©tails, conseils) √† partir des donn√©es calcul√©es.
         * Produit un bloc HTML pr√™t √† injecter dans l‚Äôinterface du calculateur.
         */
        formatResult: (result) => {
          const data = result.data;
          const endettementOk = data.tauxEndettement <= data.tauxEndettementMax;
          const taegText =
            typeof data.taeg === "number" && isFinite(data.taeg)
              ? `${data.taeg.toFixed(2)}%`
              : "‚Äî";

          return `
          <div class="space-y-6">
            <div class="bg-white rounded-lg p-6 border border-gray-200 shadow-sm">
              <h3 class="text-xl font-bold text-gray-900 mb-4">üéØ R√©sultat principal</h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                  <p class="text-sm text-gray-600">Mensualit√© totale</p>
                  <p class="text-2xl font-bold text-purple-700">${formatCurrency(
                    data.mensualiteTotale
                  )}</p>
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                  <p class="text-sm text-gray-600">Montant emprunt√©</p>
                  <p class="text-2xl font-bold text-blue-700">${formatCurrency(
                    data.montantEmprunte
                  )}</p>
                </div>
                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                  <p class="text-sm text-gray-600">Dur√©e</p>
                  <p class="text-2xl font-bold text-green-700">${data.dureeAnnees} ans</p>
                </div>
              </div>
              <p class="text-sm text-gray-600 mt-3 m-0">
                Prix du bien : <strong>${formatCurrency(
                  data.prixBien
                )}</strong> ‚Ä¢ Apport : <strong>${formatCurrency(
                  data.apportPersonnel
                )}</strong>
              </p>
            </div>

            <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg">
              <h3 class="text-lg font-bold text-blue-900 mb-2">üß† Logique de calcul (simplifi√©e)</h3>
              <ul class="text-sm text-blue-900 list-disc list-inside space-y-1">
                <li>Mensualit√© = capital + int√©r√™ts (annuit√© constante, taux fixe) + assurance (approx.)</li>
                <li>Taux d'endettement (bancaire indicatif) = (mensualit√© + charges) / revenus</li>
                <li>Taux d'effort (indicatif) = mensualit√© / (revenus ‚àí charges)</li>
                <li>TAEG estim√© : int√®gre assurance et frais (hypoth√®ses simplifi√©es)</li>
              </ul>
            </div>

            <div class="bg-white border border-gray-200 rounded-lg p-6">
              <h3 class="text-lg font-bold text-gray-900 mb-3">üìä D√©tail chiffr√©</h3>
              <div class="overflow-x-auto">
                <table class="w-full text-sm border-collapse">
                  <tbody>
                    <tr class="border-b"><td class="p-3 text-gray-600">Mensualit√© capital + int√©r√™ts</td><td class="p-3 text-right font-semibold text-gray-900">${formatCurrency(
                      data.mensualiteCapitalInterets
                    )}</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">Assurance mensuelle (approx.)</td><td class="p-3 text-right font-semibold text-gray-900">${formatCurrency(
                      data.assuranceMensuelle
                    )}</td></tr>
                    <tr class="border-b bg-gray-50"><td class="p-3 font-bold text-gray-900">Mensualit√© totale</td><td class="p-3 text-right font-bold text-purple-700">${formatCurrency(
                      data.mensualiteTotale
                    )}</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">Taux nominal</td><td class="p-3 text-right font-semibold text-gray-900">${data.tauxNominal.toFixed(
                      2
                    )}%</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">TAEG estim√© (assurance + frais)</td><td class="p-3 text-right font-semibold text-gray-900">${taegText}</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">Frais de dossier</td><td class="p-3 text-right font-semibold text-gray-900">${formatCurrency(
                      data.fraisDossier
                    )}</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">Frais de garantie</td><td class="p-3 text-right font-semibold text-gray-900">${formatCurrency(
                      data.fraisGarantie
                    )}</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">Co√ªt total int√©r√™ts</td><td class="p-3 text-right font-semibold text-gray-900">${formatCurrency(
                      data.coutTotalInterets
                    )}</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">Co√ªt total assurance</td><td class="p-3 text-right font-semibold text-gray-900">${formatCurrency(
                      data.coutTotalAssurance
                    )}</td></tr>
                    <tr class="border-b"><td class="p-3 text-gray-600">Co√ªt total hors frais</td><td class="p-3 text-right font-semibold text-gray-900">${formatCurrency(
                      data.coutTotalHorsFrais
                    )}</td></tr>
                    <tr class="bg-gray-50"><td class="p-3 font-bold text-gray-900">Co√ªt total avec frais</td><td class="p-3 text-right font-bold text-red-700">${formatCurrency(
                      data.coutTotalAvecFrais
                    )}</td></tr>
                  </tbody>
                </table>
              </div>
              <p class="text-xs text-gray-600 mt-3 m-0">
                L'assurance est ici estim√©e sur le capital initial, selon un taux annuel indicatif. Les modalit√©s r√©elles (capital restant d√ª, quotit√©, √¢ge, sant√©) peuvent modifier le co√ªt final.
              </p>
              <p class="text-xs text-gray-600 mt-2 m-0">
                Le TAEG affich√© est une estimation. Le TAEG contractuel d√©pend des conditions exactes de l'offre de pr√™t et des frais r√©els appliqu√©s par l'√©tablissement.
              </p>
            </div>

            <div class="${
              endettementOk
                ? "bg-green-50 border-green-200"
                : "bg-red-50 border-red-200"
            } border rounded-lg p-4">
              <h4 class="font-semibold ${
                endettementOk ? "text-green-800" : "text-red-800"
              } mb-2">
                ${
                  endettementOk ? "‚úÖ" : "‚ö†Ô∏è"
                } Taux d'endettement (bancaire indicatif) : ${data.tauxEndettement.toFixed(1)}%
              </h4>
              <p class="text-sm ${
                endettementOk ? "text-green-700" : "text-red-700"
              }">
                ${
                  endettementOk
                    ? `Votre taux d'endettement est acceptable (‚â§ ${data.tauxEndettementMax}%). Capacit√© restante : ${formatCurrency(
                        data.capaciteRestante
                      )}/mois`
                    : `Attention : votre taux d'endettement d√©passe ${data.tauxEndettementMax}%. Le pr√™t pourrait √™tre refus√© ou n√©cessiter des ajustements.`
                }
              </p>
              <p class="text-xs mt-2 ${
                endettementOk ? "text-green-600" : "text-red-600"
              }">
                Revenus : ${formatCurrency(
                  data.revenusMensuels
                )} ‚Ä¢ Charges : ${formatCurrency(
                  data.chargesMensuelles
                )} ‚Ä¢ Revenus disponibles : ${formatCurrency(
                  data.revenusDisponibles
                )} ‚Ä¢ Seuil ${data.tauxEndettementMax}% : ${formatCurrency(
                  data.mensualiteMax
                )}
              </p>
              <p class="text-xs text-gray-600 mt-2 m-0">
                Indicateur d'effort (reste √† vivre) : ${data.tauxEffort.toFixed(
                  1
                )}%.
              </p>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <p class="text-sm text-blue-800">
                <strong>üí° Conseil :</strong> Cette simulation est indicative. Les banques √©tudient aussi votre profil, 
                apport, stabilit√© professionnelle, et peuvent proposer des conditions diff√©rentes.
              </p>
            </div>
          </div>
          `;
        },
        exportCSV: {
          enabled: true,
          filename: "pret-immobilier-estimation.csv",
          getCSVData: (result, values) => {
            const d = result.data;
            return {
              headers: ["Param√®tre", "Valeur"],
              rows: [
                ["Prix du bien (‚Ç¨)", d.prixBien],
                ["Apport (‚Ç¨)", d.apportPersonnel],
                ["Montant emprunt√© (‚Ç¨)", d.montantEmprunte],
                ["Dur√©e (ann√©es)", d.dureeAnnees],
                ["Taux nominal (%/an)", d.tauxNominal.toFixed(2)],
                ["Assurance mensuelle (‚Ç¨)", d.assuranceMensuelle],
                ["Mensualit√© totale (‚Ç¨)", d.mensualiteTotale],
                ["Int√©r√™ts totaux (‚Ç¨)", d.coutTotalInterets],
                ["Assurance totale (‚Ç¨)", d.coutTotalAssurance],
                ["Frais dossier (‚Ç¨)", d.fraisDossier],
                ["Frais garantie (‚Ç¨)", d.fraisGarantie],
                ["Co√ªt total avec frais (‚Ç¨)", d.coutTotalAvecFrais],
                ["Revenus mensuels (‚Ç¨)", d.revenusMensuels],
                ["Charges mensuelles (‚Ç¨)", d.chargesMensuelles],
                ["Taux d'endettement bancaire indicatif (%)", d.tauxEndettement.toFixed(1)],
                ["Taux d'effort indicatif (%)", d.tauxEffort.toFixed(1)],
                [
                  "TAEG estim√© (%)",
                  typeof d.taeg === "number" && isFinite(d.taeg)
                    ? d.taeg.toFixed(2)
                    : "",
                ],
              ],
            };
          },
        },
      };

      // Initialisation du calculateur
      new CalculatorFrame("calculator-container", pretConfig);

      // Event listeners pour comparaison
      import("../components/ComparisonModal.ts").then(({ ComparisonModal }) => {
        const addBtn = document.getElementById("pret-add-to-compare");
        const resetBtn = document.getElementById("pret-reset-compare");

        ComparisonModal.init("pret");
        if (resetBtn && ComparisonModal.count("pret") > 0) {
          resetBtn.classList.remove("hidden");
        }

        if (addBtn && resetBtn) {
          addBtn.addEventListener("click", () => {
            const last = window["dernierCalcul_calculator-container"];
            const lastValues = last?.values || {};

            const modal = new ComparisonModal({
              title: "Ajouter un sc√©nario √† la comparaison",
              fields: [
                {
                  id: "label",
                  label: "Nom du sc√©nario (optionnel)",
                  type: "text",
                  value: "",
                  placeholder: "Projet r√©sidence principale",
                },
                {
                  id: "prix_bien",
                  label: "Prix du bien immobilier (‚Ç¨)",
                  type: "number",
                  value: lastValues.prix_bien ?? 300000,
                  required: true,
                  min: 10000,
                  step: 1000,
                },
                {
                  id: "apport_personnel",
                  label: "Apport personnel (‚Ç¨)",
                  type: "number",
                  value: lastValues.apport_personnel ?? 50000,
                  required: true,
                  min: 0,
                  step: 1000,
                },
                {
                  id: "duree",
                  label: "Dur√©e du pr√™t",
                  type: "select",
                  value: lastValues.duree || "20",
                  required: true,
                  options: [
                    { value: "10", label: "10 ans" },
                    { value: "15", label: "15 ans" },
                    { value: "20", label: "20 ans" },
                    { value: "25", label: "25 ans" },
                    { value: "30", label: "30 ans" },
                  ],
                },
                {
                  id: "taux_nominal",
                  label: "Taux d'int√©r√™t nominal (%/an)",
                  type: "number",
                  value: lastValues.taux_nominal ?? 4.0,
                  required: true,
                  min: 0,
                  max: 10,
                  step: 0.1,
                },
                {
                  id: "assurance_taux",
                  label: "Taux d'assurance emprunteur (%/an)",
                  type: "number",
                  value: lastValues.assurance_taux ?? 0.36,
                  required: true,
                  min: 0,
                  max: 2,
                  step: 0.01,
                },
                {
                  id: "revenus_emprunteur1",
                  label: "Revenus mensuels (‚Ç¨) emprunteur 1",
                  type: "number",
                  value: lastValues.revenus_emprunteur1 ?? 3500,
                  required: true,
                  min: 0,
                  step: 100,
                },
                {
                  id: "revenus_emprunteur2",
                  label: "Revenus mensuels (‚Ç¨) emprunteur 2 (optionnel)",
                  type: "number",
                  value: lastValues.revenus_emprunteur2 ?? 0,
                  required: false,
                  min: 0,
                  step: 100,
                },
                {
                  id: "charges_mensuelles",
                  label: "Charges mensuelles (‚Ç¨) existantes (optionnel)",
                  type: "number",
                  value: lastValues.charges_mensuelles ?? 0,
                  required: false,
                  min: 0,
                  step: 50,
                },
                {
                  id: "frais_dossier",
                  label: "Frais de dossier (‚Ç¨) (optionnel)",
                  type: "number",
                  value: lastValues.frais_dossier ?? 0,
                  required: false,
                  min: 0,
                  step: 100,
                },
                {
                  id: "frais_garantie",
                  label: "Frais de garantie (‚Ç¨) (optionnel)",
                  type: "number",
                  value: lastValues.frais_garantie ?? 0,
                  required: false,
                  min: 0,
                  step: 100,
                },
              ],
              onConfirm: (values) => {
                const normalized = {
                  prix_bien: Number(values.prix_bien) || 0,
                  apport_personnel: Number(values.apport_personnel) || 0,
                  duree: String(values.duree || "20"),
                  taux_nominal: Number(values.taux_nominal) || 0,
                  assurance_taux: Number(values.assurance_taux) || 0,
                  revenus_emprunteur1: Number(values.revenus_emprunteur1) || 0,
                  revenus_emprunteur2: Number(values.revenus_emprunteur2) || 0,
                  charges_mensuelles: Number(values.charges_mensuelles) || 0,
                  frais_dossier: Number(values.frais_dossier) || 0,
                  frais_garantie: Number(values.frais_garantie) || 0,
                };

                const computed = pretConfig.calculate(normalized);
                if (!computed?.success) {
                  alert(computed?.error || "Erreur lors du calcul.");
                  return;
                }
                const d = computed.data;
                const labelText = String(values.label || "").trim();
                const autoLabel = `Pr√™t ${d.dureeAnnees} ans ‚Ä¢ ${formatCurrency(
                  d.montantEmprunte
                )}`;

                ComparisonModal.addComparison("pret", {
                  label: labelText || autoLabel,
                  mensualite: formatCurrency(d.mensualiteTotale),
                  cout_total: formatCurrency(d.coutTotalAvecFrais),
                  taux_endettement: `${d.tauxEndettement.toFixed(1)}%`,
                  taux_effort: `${d.tauxEffort.toFixed(1)}%`,
                  montant_emprunte: formatCurrency(d.montantEmprunte),
                  taeg: typeof d.taeg === "number" && isFinite(d.taeg) ? `${d.taeg.toFixed(2)}%` : "‚Äî",
                });

                resetBtn.classList.remove("hidden");
                document
                  .getElementById("pret-comparaison")
                  ?.scrollIntoView({ behavior: "smooth" });
              },
            });

            modal.open();
          });

          resetBtn.addEventListener("click", () => {
            ComparisonModal.resetComparison("pret");
            resetBtn.classList.add("hidden");
          });
        }
      });
    </script>
    
    <!-- Auto-initialisation des exports PDF/CSV -->
    <script type="module">
  const __lcLoadAutoExport = () => import("../utils/autoExportInit.js");
  if ("requestIdleCallback" in window) {
    window.requestIdleCallback(__lcLoadAutoExport, { timeout: 4000 });
  } else {
    window.setTimeout(__lcLoadAutoExport, 2000);
  }
</script>
  <div class="ymyl-officiel-btn" style="text-align:center;margin:20px 0;"><a class="btn-officiel" href="https://www.notaires.fr" target="_blank" rel="noopener" style="display:inline-block;background:#007bff;color:#fff;padding:12px 24px;border-radius:4px;text-decoration:none;font-weight:bold;">üëâ Simulateur officiel notaires.fr</a><p style="font-size:12px;color:#666;margin-top:8px;">Pour un calcul definitif conforme aux baremes officiels</p></div>

<!-- YMYL Verbalization Script -->
<script>
(function() {
  'use strict';
  
  // Configuration par type
  const CONFIG = {
    APL: { source: 'CAF', url: 'https://www.caf.fr' },
    IMPOT: { source: 'impots.gouv.fr', url: 'https://www.impots.gouv.fr' },
    NOTAIRE: { source: 'notaires.fr', url: 'https://www.notaires.fr' },
    RSA: { source: 'CAF', url: 'https://www.caf.fr' },
    PRIME: { source: 'CAF', url: 'https://www.caf.fr' },
    IK: { source: 'impots.gouv.fr', url: 'https://www.impots.gouv.fr' },
    SALAIRE: { source: 'officiel', url: 'https://www.impots.gouv.fr' },
    PRET: { source: 'banque', url: '#' },
    TAXE: { source: 'impots.gouv.fr', url: 'https://www.impots.gouv.fr' },
    PLUSVALUE: { source: 'notaire', url: 'https://www.notaires.fr' }
  };
  
  // Detecter le type de simulateur
  function detectType() {
    const path = window.location.pathname.toLowerCase();
    if (path.includes('apl')) return 'APL';
    if (path.includes('impot')) return 'IMPOT';
    if (path.includes('notaire')) return 'NOTAIRE';
    if (path.includes('rsa')) return 'RSA';
    if (path.includes('prime')) return 'PRIME';
    if (path.includes('ik') || path.includes('kilometrique')) return 'IK';
    if (path.includes('salaire')) return 'SALAIRE';
    if (path.includes('pret')) return 'PRET';
    if (path.includes('taxe')) return 'TAXE';
    if (path.includes('plus-value')) return 'PLUSVALUE';
    return 'GENERIC';
  }
  
  // Verbaliser un montant
  function verbalize(value) {
    const num = parseInt(value);
    if (isNaN(num) || num < 10) return value;
    const rounded = Math.round(num / 10) * 10;
    return 'environ ' + rounded + ' ‚Ç¨';
  }
  
  // Traiter un element
  function processElement(el, type) {
    const text = el.textContent || el.innerText || '';
    const match = text.match(/(d[ds]{2,5})s*‚Ç¨/);
    if (!match) return;
    
    const exactVal = match[1].replace(/s/g, '');
    const verbalVal = verbalize(exactVal);
    const config = CONFIG[type] || CONFIG.GENERIC;
    
    // Remplacer contenu
    el.innerHTML = '<span class="ymyl-verbal" style="color:inherit;">' + verbalVal + '</span>' +
                   '<span class="ymyl-exact" style="display:none;">' + exactVal + ' ‚Ç¨</span>' +
                   '<small style="display:block;color:#666;font-size:0.8em;margin-top:2px;">valeur indicative ‚Äì voir ' + config.source + ' pour montant exact</small>';
  }
  
  // Observer les changements DOM
  const observer = new MutationObserver(function(mutations) {
    const type = detectType();
    mutations.forEach(function(mutation) {
      mutation.addedNodes.forEach(function(node) {
        if (node.nodeType === 1) { // Element
          // Chercher dans les resultats
          const results = node.querySelectorAll ? 
            node.querySelectorAll('.result, .montant, [class*="result"], [class*="montant"], output, .calculator-result, #calculator-result') : [];
          results.forEach(function(el) {
            if (el.textContent.includes('‚Ç¨')) {
              processElement(el, type);
            }
          });
        }
      });
    });
  });
  
  // Demarrer observation
  document.addEventListener('DOMContentLoaded', function() {
    const type = detectType();
    
    // Traiter elements existants
    document.querySelectorAll('.result, .montant, [class*="result"], [class*="montant"], output, .calculator-result, #calculator-result, strong, span').forEach(function(el) {
      if (el.textContent.match(/d{3,6}s*‚Ç¨/)) {
        processElement(el, type);
      }
    });
    
    // Observer nouveaux elements
    observer.observe(document.body, { childList: true, subtree: true });
  });
})();
</script>

<div class="cluster-links" style="margin-top:2rem;padding:1rem;background:#f3f4f6;border-radius:8px;"><p><strong>Continuez votre simulation :</strong></p><a href="/pages/notaire">Estimez les frais de notaire</a> | <a href="/pages/taxe">Calculez la taxe fonci√®re</a> | <a href="/pages/apl">V√©rifiez vos APL</a></div>
</body>
</html>



