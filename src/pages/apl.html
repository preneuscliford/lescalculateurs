<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Calculateur APL 2025 — Aide Personnalisée au Logement (gratuit)
    </title>
    <meta
      name="description"
      content="Estimez votre Aide Personnalisée au Logement (APL) 2025. Simulateur gratuit selon votre situation, revenus et type de logement. Calcul en 1 minute."
    />
    <meta
      name="keywords"
      content="calculateur APL, aide personnalisée logement, APL 2025, simulation APL, montant APL, eligibilité APL, allocation logement, barème APL"
    />
    <meta name="google-adsense-account" content="ca-pub-2209781252231399" />

    <!-- SEO & Social -->
    <link rel="canonical" href="https://www.lescalculateurs.fr/pages/apl" />
    <meta
      property="og:url"
      content="https://www.lescalculateurs.fr/pages/apl"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Calculateur APL 2025 — Aide Personnalisée au Logement"
    />
    <meta
      property="og:description"
      content="Estimez votre APL gratuitement en 1 minute selon votre situation familiale et revenus"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Calculateur APL 2025 — Aide Personnalisée au Logement"
    />
    <meta
      name="twitter:description"
      content="Estimez votre APL gratuitement en 1 minute"
    />

    <!-- Favicon -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../assets/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../assets/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../assets/favicon-16x16.png"
    />
    <link rel="manifest" href="../assets/site.webmanifest" />
    <link rel="shortcut icon" href="../assets/favicon.ico" />

    <!-- Google AdSense -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2209781252231399"
      crossorigin="anonymous"
    ></script>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-TPFZCGX5");
    </script>
    <!-- End Google Tag Manager -->

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-2HNTGCYQ1X"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-2HNTGCYQ1X");
    </script>

    <link rel="stylesheet" href="../tailwind.css" />
  </head>
  <body class="bg-gray-50">
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-TPFZCGX5"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
          <!-- Logo & Navigation -->
          <div class="flex items-center space-x-6">
            <img
              src="../assets/logo.svg"
              alt="LesCalculateurs.fr"
              class="w-6 h-6"
            />
            <a
              href="simulateurs.html"
              class="flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium transition-colors"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 19l-7-7m0 0l7-7m-7 7h18"
                ></path>
              </svg>
              <span>← Simulateurs</span>
            </a>
            <div class="hidden sm:block">
              <span class="text-gray-400">|</span>
            </div>
            <div class="hidden sm:flex items-center space-x-2">
              <div class="bg-purple-100 text-purple-700 rounded-lg p-1.5">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                  <path
                    d="M10 12a2 2 0 100-4 2 2 0 000 4zm0-2a0.5 0.5 0 110-1 0.5 0.5 0 010 1z"
                  ></path>
                </svg>
              </div>
              <span class="text-sm font-medium text-gray-700">APL 2025</span>
            </div>
          </div>

          <!-- Title & Status -->
          <div class="flex items-center space-x-3">
            <h1 class="text-xl sm:text-2xl font-bold text-gray-900">
              🏘️ APL 2025
            </h1>
            <span
              class="hidden sm:inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"
            >
              NOUVEAU
            </span>
          </div>

          <!-- Actions -->
          <div class="hidden md:block">
            <span class="text-xs text-gray-500">Estimation</span>
          </div>
        </div>
      </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <!-- Info Banner -->
      <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-8">
        <p class="text-blue-800 text-sm mb-2">
          <strong>📌 Simulation à titre indicatif :</strong> Cette estimation ne
          constitue pas une demande officielle. Consultez
          <a
            href="https://www.caf.fr"
            target="_blank"
            class="underline hover:no-underline"
            >la CAF</a
          >
          pour connaître votre droit réel à l'APL.
        </p>
      </div>

      <div id="apl-calculator"></div>

      <!-- Boutons de comparaison -->
      <div class="mt-6 flex justify-center gap-3">
        <button
          id="apl-add-to-compare"
          class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md transition-colors"
        >
          ➕ Ajouter à la comparaison
        </button>
        <button
          id="apl-reset-compare"
          class="px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 font-semibold shadow-md transition-colors hidden"
        >
          🔄 Réinitialiser
        </button>
      </div>

      <!-- Conteneur de comparaison (masqué par défaut) -->
      <div id="apl-comparaison" class="hidden"></div>

      <!-- FAQ Section -->
      <section class="mt-16 bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-8">
          Questions fréquentes
        </h2>

        <div class="space-y-6">
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              Qu'est-ce que l'APL ?
            </h3>
            <p class="text-gray-600">
              L'Aide Personnalisée au Logement (APL) est une allocation versée
              par la Caisse d'Allocations Familiales (CAF) pour vous aider à
              payer votre loyer ou votre emprunt immobilier. Elle est soumise à
              des conditions de ressources.
            </p>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              Qui peut recevoir l'APL ?
            </h3>
            <p class="text-gray-600">
              Pour être éligible à l'APL, vous devez : résider en France
              métropolitaine, avoir un logement décent et conforme aux normes,
              respecter les plafonds de ressources (selon votre situation), et
              être français ou ressortissant d'un pays de l'UE/EEE.
            </p>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              Comment est calculée l'APL ?
            </h3>
            <p class="text-gray-600 mb-3">
              <strong
                >Formule simplifiée : APL = Loyer pris en compte – Participation
                personnelle</strong
              >
            </p>
            <p class="text-gray-600 mb-3">
              La participation personnelle dépend de :
            </p>
            <ul class="text-gray-600 text-sm space-y-1 ml-4 mb-3">
              <li>
                • Vos revenus fiscaux (revenus N-2, transmis automatiquement par
                les impôts)
              </li>
              <li>• Votre composition familiale et nombre d'enfants</li>
              <li>
                • Votre zone géographique (Île-de-France, Province, DOM-TOM)
              </li>
              <li>• Le loyer pris en compte (plafonné par la CAF)</li>
            </ul>
            <p class="text-gray-600">
              Plus vos revenus sont élevés, moins vous recevez d'APL. La CAF
              utilise votre revenu fiscal de référence (RFR) N-2, transmis
              automatiquement par les impôts grâce au système "RLS".
            </p>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              Quels revenus sont pris en compte ?
            </h3>
            <p class="text-gray-600 mb-3">
              La CAF considère les revenus professionnels, allocations chômage,
              pensions, revenus du capital et allocations sociales. Votre avis
              d'imposition sur le revenu des 2 dernières années est analysé.
            </p>
            <p class="text-sm italic text-orange-700 bg-orange-50 p-2 rounded">
              💡 <strong>Important :</strong> La CAF utilise votre revenu fiscal
              de référence (RFR) N-2, transmis automatiquement par les impôts
              grâce au système de ressources "RLS". Vos ressources ne sont
              vérifiées qu'une fois par an.
            </p>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              Loyers plafonnés par la CAF
            </h3>
            <p class="text-gray-600 mb-2">
              ⚠️ <strong>Important :</strong> La CAF limite le loyer pris en
              compte pour le calcul de l'APL. Si votre loyer dépasse le plafond
              CAF de votre zone, la partie excédentaire n'est pas retenue dans
              le calcul.
            </p>
            <p class="text-gray-600 text-sm">
              Exemple : Si le plafond est 600 € et votre loyer est 700 €, seuls
              600 € sont considérés pour l'APL.
            </p>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              Quand demander l'APL ?
            </h3>
            <p class="text-gray-600">
              Vous pouvez demander l'APL dès que vous avez un logement conforme.
              Les allocations sont versées à partir du mois suivant votre
              demande (ou du mois de signature du bail/emprunt). Déposez votre
              demande rapidement pour ne pas perdre de mois d'aide.
            </p>
          </div>

          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">
              Que faire si mon APL change ?
            </h3>
            <p class="text-gray-600">
              Votre APL est recalculée automatiquement chaque année en janvier.
              Si votre situation change (mariage, enfant, perte d'emploi),
              signalez-le à la CAF dans les 10 jours. Les changements de revenus
              peuvent augmenter ou réduire votre allocation.
            </p>
          </div>
        </div>
      </section>

      <!-- Exemples de calcul APL -->
      <section class="mt-16 bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-8">
          💡 Exemples de calcul APL 2025
        </h2>
        <p class="text-gray-600 mb-8">
          Voici quelques cas concrets pour comprendre comment l'APL est
          calculée. Les montants sont estimés et peuvent varier selon votre
          région et votre situation exacte.
        </p>

        <div class="space-y-8">
          <!-- Exemple 1 -->
          <div class="border-l-4 border-blue-500 pl-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">
              📍 Exemple 1 : Célibataire, Location en Île-de-France
            </h3>
            <div class="bg-gray-50 p-4 rounded-lg text-sm space-y-2 mb-3">
              <div>
                <span class="text-gray-700">Situation :</span>
                <span class="font-medium">Seul(e), sans enfant</span>
              </div>
              <div>
                <span class="text-gray-700">Revenus nets mensuels :</span>
                <span class="font-medium">1 500 €</span>
              </div>
              <div>
                <span class="text-gray-700">Loyer :</span>
                <span class="font-medium">700 €</span>
              </div>
              <div>
                <span class="text-gray-700">Zone :</span>
                <span class="font-medium">Île-de-France (Zone 1)</span>
              </div>
            </div>
            <div class="bg-blue-50 p-4 rounded-lg">
              <p class="text-blue-900">
                <strong>Estimation APL :</strong>
                <span class="text-2xl font-bold text-blue-600"
                  >180 € à 220 €</span
                >
                par mois
              </p>
              <p class="text-sm text-blue-800 mt-2">
                Charge à payer : environ 480 € à 520 €
              </p>
            </div>
          </div>

          <!-- Exemple 2 -->
          <div class="border-l-4 border-green-500 pl-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">
              👨‍👩‍👧‍👦 Exemple 2 : Couple, 2 enfants, Location en Province
            </h3>
            <div class="bg-gray-50 p-4 rounded-lg text-sm space-y-2 mb-3">
              <div>
                <span class="text-gray-700">Situation :</span>
                <span class="font-medium">Couple marié, 2 enfants</span>
              </div>
              <div>
                <span class="text-gray-700">Revenus nets mensuels :</span>
                <span class="font-medium">3 200 €</span>
              </div>
              <div>
                <span class="text-gray-700">Loyer :</span>
                <span class="font-medium">850 €</span>
              </div>
              <div>
                <span class="text-gray-700">Zone :</span>
                <span class="font-medium">Province (Zone 2)</span>
              </div>
            </div>
            <div class="bg-green-50 p-4 rounded-lg">
              <p class="text-green-900">
                <strong>Estimation APL :</strong>
                <span class="text-2xl font-bold text-green-600"
                  >250 € à 320 €</span
                >
                par mois
              </p>
              <p class="text-sm text-green-800 mt-2">
                Charge à payer : environ 530 € à 600 €
              </p>
            </div>
          </div>

          <!-- Exemple 3 -->
          <div class="border-l-4 border-purple-500 pl-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">
              🎓 Exemple 3 : Étudiant, Location en Zone Urbaine
            </h3>
            <div class="bg-gray-50 p-4 rounded-lg text-sm space-y-2 mb-3">
              <div>
                <span class="text-gray-700">Situation :</span>
                <span class="font-medium">Étudiant indépendant</span>
              </div>
              <div>
                <span class="text-gray-700">Revenus nets mensuels :</span>
                <span class="font-medium">800 € (job étudiant)</span>
              </div>
              <div>
                <span class="text-gray-700">Loyer :</span>
                <span class="font-medium">550 €</span>
              </div>
              <div>
                <span class="text-gray-700">Zone :</span>
                <span class="font-medium">Université (Zone 1)</span>
              </div>
            </div>
            <div class="bg-purple-50 p-4 rounded-lg">
              <p class="text-purple-900">
                <strong>Estimation APL :</strong>
                <span class="text-2xl font-bold text-purple-600"
                  >300 € à 350 €</span
                >
                par mois
              </p>
              <p class="text-sm text-purple-800 mt-2">
                Charge à payer : environ 200 € à 250 €
              </p>
            </div>
          </div>

          <!-- Exemple 4 -->
          <div class="border-l-4 border-yellow-500 pl-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">
              🏠 Exemple 4 : Accession à la propriété (Crédit immobilier)
            </h3>
            <div class="bg-gray-50 p-4 rounded-lg text-sm space-y-2 mb-3">
              <div>
                <span class="text-gray-700">Situation :</span>
                <span class="font-medium"
                  >Couple, 1 enfant, primo-accédant</span
                >
              </div>
              <div>
                <span class="text-gray-700">Revenus nets mensuels :</span>
                <span class="font-medium">2 800 €</span>
              </div>
              <div>
                <span class="text-gray-700">Mensualité crédit :</span>
                <span class="font-medium">950 €</span>
              </div>
              <div>
                <span class="text-gray-700">Zone :</span>
                <span class="font-medium">Province (Zone 2)</span>
              </div>
            </div>
            <div class="bg-yellow-50 p-4 rounded-lg">
              <p class="text-yellow-900">
                <strong>Estimation APL :</strong>
                <span class="text-2xl font-bold text-yellow-600"
                  >150 € à 200 €</span
                >
                par mois
              </p>
              <p class="text-sm text-yellow-800 mt-2">
                Charge mensuelle après aide : environ 750 € à 800 €
              </p>
            </div>
          </div>
        </div>

        <div class="mt-8 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg">
          <p class="text-blue-800 text-sm">
            <strong>⚠️ Note :</strong> Ces exemples sont fournis à titre
            illustratif. Les montants réels d'APL dépendent de nombreux facteurs
            : revenus N-2 exacts, composition du foyer, loyer pris en compte par
            la CAF, situation patrimoniale, etc. Pour un calcul officiel,
            contactez la CAF de votre département.
          </p>
        </div>
      </section>

      <!-- Plafonds CAF 2025 -->
      <section class="mt-16 bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-8">
          📊 Plafonds CAF 2025 par Zone
        </h2>
        <p class="text-gray-600 mb-6">
          Les plafonds de loyer pris en compte par la CAF varient selon votre
          zone géographique et votre composition familiale. Voici les principaux
          seuils 2025.
        </p>

        <!-- Tableau Zone 1 (IDF) -->
        <div class="mb-8">
          <h3
            class="text-lg font-semibold text-gray-900 mb-4 flex items-center"
          >
            <span
              class="bg-blue-100 text-blue-600 rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold"
              >1</span
            >
            Zone 1 : Île-de-France
          </h3>
          <div class="overflow-x-auto">
            <table class="w-full text-sm border-collapse">
              <thead class="bg-blue-50">
                <tr>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    Situation familiale
                  </th>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    Loyer plafonné (€)
                  </th>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    APL max. approx. (€)
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Personne seule
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    610 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    200–280 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">Couple</td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    670 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    250–350 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Couple + 1 enfant
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    730 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    300–400 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Couple + 2 enfants
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    790 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    350–450 €
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Tableau Zone 2 (Province) -->
        <div class="mb-8">
          <h3
            class="text-lg font-semibold text-gray-900 mb-4 flex items-center"
          >
            <span
              class="bg-green-100 text-green-600 rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold"
              >2</span
            >
            Zone 2 : Province Agglomérations
          </h3>
          <div class="overflow-x-auto">
            <table class="w-full text-sm border-collapse">
              <thead class="bg-green-50">
                <tr>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    Situation familiale
                  </th>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    Loyer plafonné (€)
                  </th>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    APL max. approx. (€)
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Personne seule
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    510 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    160–220 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">Couple</td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    560 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    200–280 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Couple + 1 enfant
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    610 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    250–320 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Couple + 2 enfants
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    660 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    300–380 €
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Tableau Zone 3 (Rurale) -->
        <div class="mb-8">
          <h3
            class="text-lg font-semibold text-gray-900 mb-4 flex items-center"
          >
            <span
              class="bg-yellow-100 text-yellow-600 rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold"
              >3</span
            >
            Zone 3 : Communes Rurales
          </h3>
          <div class="overflow-x-auto">
            <table class="w-full text-sm border-collapse">
              <thead class="bg-yellow-50">
                <tr>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    Situation familiale
                  </th>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    Loyer plafonné (€)
                  </th>
                  <th
                    class="border border-gray-300 px-4 py-2 text-left font-semibold text-gray-900"
                  >
                    APL max. approx. (€)
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Personne seule
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    430 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    140–190 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">Couple</td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    480 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    180–240 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Couple + 1 enfant
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    530 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    220–300 €
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="border border-gray-300 px-4 py-2">
                    Couple + 2 enfants
                  </td>
                  <td class="border border-gray-300 px-4 py-2 font-medium">
                    580 €
                  </td>
                  <td
                    class="border border-gray-300 px-4 py-2 font-medium text-green-600"
                  >
                    270–350 €
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div
          class="mt-8 bg-orange-50 border-l-4 border-orange-500 p-4 rounded-lg"
        >
          <p class="text-orange-800 text-sm">
            <strong>📌 Remarques importantes :</strong> Ces plafonds sont
            actualisés régulièrement par la CAF. Les montants d'APL affichés
            sont des estimations basées sur une participation personnelle
            moyenne. Votre APL réelle dépend de votre contribution exacte,
            elle-même calculée à partir de vos revenus N-2 et de votre
            patrimoine.
          </p>
        </div>

        <!-- Lien vers zones APL -->
        <div class="mt-8 p-4 bg-blue-50 rounded-lg text-center">
          <p class="text-gray-700 mb-3">
            Vous voulez en savoir plus sur les zones APL?
          </p>
          <a
            href="apl-zones.html"
            class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded transition"
          >
            En savoir plus sur les zones APL →
          </a>
        </div>
      </section>
    </main>

    <footer class="bg-gray-100 border-t border-gray-200 mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <p class="text-center text-gray-600 text-sm">
          © 2025 LesCalculateurs.fr
        </p>
      </div>
    </footer>

    <script type="module">
      import { CalculatorFrame } from "../components/CalculatorFrame.ts";

      const aplConfig = {
        title: "Estimateur APL 2025",
        description:
          "Estimez votre Aide Personnalisée au Logement selon votre situation familiale, revenus et type de logement. Simulation à titre informatif uniquement.",
        fields: [
          {
            id: "situation",
            label: "Situation familiale *",
            type: "select",
            required: true,
            options: [
              { value: "seul", label: "Célibataire / Seul" },
              { value: "couple", label: "En couple (marié ou concubinage)" },
              {
                value: "monoparental",
                label: "Monoparental (1 enfant minimum)",
              },
              { value: "autre", label: "Autre" },
            ],
          },
          {
            id: "enfants",
            label: "Nombre d'enfants à charge",
            type: "number",
            required: true,
            placeholder: "0",
            min: 0,
            max: 10,
            step: 1,
          },
          {
            id: "revenus_mensuels",
            label: "Revenus nets mensuels *",
            type: "number",
            required: true,
            placeholder: "2500",
            min: 0,
            step: 100,
            suffix: "€",
          },
          {
            id: "type_logement",
            label: "Type de logement *",
            type: "select",
            required: true,
            options: [
              { value: "location", label: "Location (logement principal)" },
              {
                value: "accession",
                label: "Accession à la propriété (crédit immobilier)",
              },
              { value: "hlm", label: "Logement HLM" },
              { value: "colocation", label: "Colocation / Chambre meublée" },
            ],
          },
          {
            id: "loyer_mensuel",
            label: "Loyer/Mensualité crédit *",
            type: "number",
            required: true,
            placeholder: "800",
            min: 0,
            step: 50,
            suffix: "€",
          },
          {
            id: "region",
            label: "Région *",
            type: "select",
            required: true,
            options: [
              { value: "idf", label: "Île-de-France" },
              { value: "province", label: "Province (hors IDF)" },
              { value: "dom", label: "DOM-TOM" },
            ],
          },
          {
            id: "economie",
            label: "Économies / Épargne (optionnel)",
            type: "number",
            required: false,
            placeholder: "Laissez vide si inconnu",
            min: 0,
            step: 500,
            suffix: "€",
          },
        ],
        calculate: (values) => {
          try {
            const {
              situation,
              enfants,
              revenus_mensuels,
              type_logement,
              loyer_mensuel,
              region,
              economie,
            } = values;

            if (
              !situation ||
              revenus_mensuels === null ||
              !type_logement ||
              loyer_mensuel === null
            ) {
              return {
                success: false,
                error: "Tous les champs obligatoires doivent être remplis",
              };
            }

            // Coefficients selon la situation
            let coefficient = 1;
            if (situation === "couple") coefficient = 1.5;
            else if (situation === "monoparental") coefficient = 1.3;

            // Ajouter l'impact des enfants
            const enfants_num = parseInt(enfants) || 0;
            const charges_enfants = enfants_num * 70; // 70€ par enfant par mois

            // Calcul de la contribution personnelle (simplifié)
            let contribution = Math.max(
              0,
              revenus_mensuels * 0.07 + economie / 10000 + charges_enfants
            );

            // Variation selon la région (IDF plus cher)
            let multiplicateur_region = 1;
            if (region === "idf") multiplicateur_region = 1.15;
            else if (region === "dom") multiplicateur_region = 0.95;

            // Calcul APL estimée
            let apl_estimee = Math.max(
              0,
              (loyer_mensuel - contribution) * 0.85
            );

            // Appliquer le coefficient régional
            apl_estimee *= multiplicateur_region;

            // Arrondir à l'euro inférieur
            apl_estimee = Math.floor(apl_estimee);

            // Plafonner selon les maxima CAF 2025 (approximatif)
            const plafond_apl =
              region === "idf" ? 610 : region === "dom" ? 430 : 510;
            apl_estimee = Math.min(apl_estimee, plafond_apl);

            return {
              success: true,
              data: {
                apl_estimee,
                loyer_mensuel,
                contribution,
                reste_charge: Math.max(0, loyer_mensuel - apl_estimee),
                situation,
                enfants: enfants_num,
                revenus_mensuels,
              },
            };
          } catch (error) {
            return { success: false, error: error.message };
          }
        },
        formatResult: (result) => {
          const { data } = result;
          if (!data) return "Erreur de calcul";

          const formatCurrency = (amount) => {
            return new Intl.NumberFormat("fr-FR", {
              style: "currency",
              currency: "EUR",
            }).format(amount);
          };

          return `
            <div class="space-y-4">
              <div class="bg-green-50 p-6 rounded-lg border-2 border-green-500">
                <h3 class="text-lg font-semibold text-green-900 mb-2">💚 Votre APL estimée</h3>
                <p class="text-4xl font-bold text-green-600">${formatCurrency(
                  data.apl_estimee
                )}</p>
                <p class="text-sm text-green-700 mt-2">par mois</p>
                <p class="text-xs text-green-700 mt-3 italic border-t border-green-300 pt-3">📊 Fourchette généralement constatée : 150 € – 600 € selon votre situation et zone.</p>
              </div>

              <div class="bg-gray-50 p-4 rounded-lg space-y-3 text-sm">
                <div class="flex justify-between">
                  <span class="text-gray-700">Loyer/Mensualité crédit :</span>
                  <span class="font-medium">${formatCurrency(
                    data.loyer_mensuel
                  )}</span>
                </div>
                <div class="flex justify-between">
                  <span class="text-gray-700">Votre participation estimée :</span>
                  <span class="font-medium">${formatCurrency(
                    data.contribution
                  )}</span>
                </div>
                <div class="flex justify-between border-t pt-3">
                  <span class="text-gray-700"><strong>Charge à payer après aide</strong> :</span>
                  <span class="font-medium text-orange-600">${formatCurrency(
                    data.reste_charge
                  )}</span>
                </div>
              </div>

              <div class="bg-orange-50 border-l-4 border-orange-500 p-4 rounded-lg text-sm text-orange-800">
                <p><strong>📌 Simulation à titre indicatif :</strong> Cette estimation ne constitue pas une demande officielle. <a href="https://www.caf.fr" target="_blank" class="underline hover:no-underline font-medium">Consultez la CAF</a> pour connaître votre droit réel à l'APL.</p>
              </div>
            </div>
          `;
        },
      };

      new CalculatorFrame("apl-calculator", aplConfig);
    </script>

    <!-- Gestion de la comparaison APL -->
    <script type="module" src="./scripts/apl-script.ts"></script>
  </body>
</html>
